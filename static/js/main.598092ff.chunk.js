(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,a){"use strict";a.r(t);a(64),a(89);var n=a(0),r=a.n(n),i=a(37),o=a.n(i),c=a(22),l=a.n(c),s=a(9),u=a(10),p=a(12),d=a(11),h=a(13),m=a(1),v=(a(27),function(e){var t=e.id,a=e.go,n=e.fetchedUser;return r.a.createElement(m.View,{id:t,activePanel:t+"_panel"},r.a.createElement(m.Panel,{id:t+"_panel"},r.a.createElement(m.PanelHeader,null,"Start Page"),n&&r.a.createElement(m.Group,{title:"User Data Fetched with VK Connect"},r.a.createElement(m.ListItem,{before:n.photo_200?r.a.createElement(m.Avatar,{src:n.photo_200}):null,description:n.city&&n.city.title?n.city.title:""},"".concat(n.first_name," ").concat(n.last_name))),r.a.createElement(m.Group,{title:"Pages"},r.a.createElement(m.Div,null,r.a.createElement(m.Button,{size:"xl",level:"2",onClick:a,"data-to":"quepoll"},"Questions")),r.a.createElement(m.Div,null,r.a.createElement(m.Button,{size:"xl",level:"2",onClick:a,"data-to":"error"},"Show me 404")))))}),f=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(m.View,{id:this.props.id,activePanel:this.props.id+"_panel"},r.a.createElement(m.Panel,{id:this.props.id+"_panel"},r.a.createElement(m.PanelHeader,null,"404"),r.a.createElement(m.Div,{style:{paddingTop:30,paddingBottom:60,color:"gray",textAlign:"center"}},r.a.createElement("h2",null,"404 Page Not Found"),r.a.createElement("br",null),r.a.createElement("p",null,"\u0423\u043f\u0441\u2026 \u041c\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u043c \u043d\u0430\u0439\u0442\u0438 \u0442\u043e, \u0447\u0442\u043e \u0412\u044b \u0438\u0449\u0435\u0442\u0435"))))}}]),t}(r.a.Component),b=a(39),g=a(62),w=a.n(g),E=a(38),y=a.n(E),O=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=Object(m.platform)();return r.a.createElement(m.Panel,{id:this.props.id},r.a.createElement(m.PanelHeader,{left:r.a.createElement(m.HeaderButton,{onClick:this.props.goB},e===m.IOS?r.a.createElement(w.a,null):r.a.createElement(y.a,null))},this.props.data.title),JSON.stringify(this.props.data),r.a.createElement(m.Div,null,r.a.createElement(m.Button,{size:"l",level:"secondary",onClick:this.props.goF,"data-to":this.props.id},"Next")))}}]),t}(r.a.Component),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).goBack=function(){var e=Object(b.a)(a.state.history);if(e.length>0){var t=e.pop(),n=parseInt(t.match(/\d+/));n>=0&&(a.setState({history:e}),a.setState({activePanel:"question"+n}))}else a.props.sv("home")},a.goForward=function(e){var t=e.currentTarget.dataset.to,n=Object(b.a)(a.state.history),r=parseInt(t.match(/\d+/));Object.keys(a.props.data.items).length>r+1&&(n.push(t),a.setState({history:n}),r++,a.setState({activePanel:"question"+r}))},a.state={history:[],activePanel:"question0"},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(m.View,{id:this.props.id,activePanel:this.state.activePanel},Object.keys(this.props.data.items).map(function(t){return r.a.createElement(O,{id:"question"+t,data:e.props.data.items[t],goF:e.goForward,goB:e.goBack})}))}}]),t}(r.a.Component),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).switchView=function(e){a.setState({activeView:e})},a.go=function(e){a.setState({activeView:e.currentTarget.dataset.to})},a.getPoll=function(e){try{var t=new XMLHttpRequest;if(t.open("GET","http://localhost:3012/getpoll?id="+e,!1),t.send(),200!==t.status)a.switchView("error");else{var n=JSON.parse(t.responseText);if(!1===n.ok)return void a.switchView("error");a.setState({data:n})}}catch(r){a.switchView("error")}},a.parseQueryString=function(e){return e.slice(1).split("&").map(function(e){var t=e.split("=");return{key:t[0],value:t[1]}}).reduce(function(e,t){return e[t.key]=t.value,e},{})},a.state={data:[],activeView:"home",fetchedUser:null,isLoading:!1,pollId:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;l.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;default:console.log(t.detail.type)}}),l.a.send("VKWebAppGetUserInfo",{});var t=this.parseQueryString(window.location.hash);console.log(Object.keys(t)),Object.keys(t).includes("poll")?Object.keys(t).map(function(a){var n=t[a];return"poll"===a&&(e.setState({pollId:n}),e.getPoll(n)),[]}):this.switchView("error")}},{key:"render",value:function(){return r.a.createElement(m.Root,{activeView:this.state.activeView},r.a.createElement(f,{id:"error",go:this.go}),r.a.createElement(j,{id:"quepoll",data:this.state.data,sv:this.switchView}),r.a.createElement(v,{id:"home",fetchedUser:this.state.fetchedUser,go:this.go}))}}]),t}(r.a.Component);l.a.send("VKWebAppInit",{}),o.a.render(r.a.createElement(k,null),document.getElementById("root"))},63:function(e,t,a){e.exports=a(111)}},[[63,1,2]]]);
//# sourceMappingURL=main.598092ff.chunk.js.map